<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>simsalRbim • simsalRbim</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="simsalRbim">
<meta property="og:description" content="simsalRbim">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">simsalRbim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/simsalRbim_examples.html">simsalRbim Examples</a>
    </li>
    <li>
      <a href="../articles/simsalRbim_vignette.html">simsalRbim</a>
    </li>
    <li>
      <a href="../articles/simsalRbim_worth_evaluation.html">simsalRbim - Worth Evaluation</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mytalbot/simsalRbim/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="simsalRbim_vignette_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>simsalRbim</h1>
                        <h4 class="author">Steven R. Talbot</h4>
                        <h4 class="author">Dana Pfefferle</h4>
                        <h4 class="author">Lars Lewejohann</h4>
            
            <h4 class="date">2021-06-03</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mytalbot/simsalRbim/blob/master/vignettes/simsalRbim_vignette.Rmd"><code>vignettes/simsalRbim_vignette.Rmd</code></a></small>
      <div class="hidden name"><code>simsalRbim_vignette.Rmd</code></div>

    </div>

    
    
<div id="simsalrbim---a-package-for-preference-test-simulations" class="section level2">
<h2 class="hasAnchor">
<a href="#simsalrbim---a-package-for-preference-test-simulations" class="anchor"></a>simsalRbim - A package for preference test simulations</h2>
<p>Preference tests are a valuable tool to measure the “wants” of individuals and have been proven to be a valid method to rate different commodities. The number of commodities presented at the same time is, however, limited and in classical test settings usually, only two options are presented. In our paper (<strong>add reference</strong>), we evaluate the option of combining multiple binary choices to rank preferences among a larger number of commodities. In addition, we suggest how missing data can be replaced by simulations to minimize the number of individual tests needed. The <strong>simsalRbim</strong> package offers the necessary tools to test selections of commodities and to obtain an estimate of new or incompletely tested items and their relative position.</p>
<div id="data-availability" class="section level3">
<h3 class="hasAnchor">
<a href="#data-availability" class="anchor"></a>Data availability</h3>
<p>The package contains an artificial set of data, ZickeZacke, which we use as an example to show the functionality of the package. In addition experimental data from six different preference tests can be downloaded from a separate <a href="https://github.com/mytalbot/simsalRbim_data">GitHub</a> repository and can be used directly in this package (e.g., with the <code>bimload</code> function).</p>
</div>
<div id="dependencies" class="section level3">
<h3 class="hasAnchor">
<a href="#dependencies" class="anchor"></a>Dependencies</h3>
<p><strong>simsalRbim</strong> was developed on R (v4.0.3). It depends on the following packages (in no particular order, excluding R base packages) and some of them may have to be installed manually. (If you did not yet install the package devtools, remove the hashtag in the first line.)</p>
<p>“dplyr”<span class="citation">[1]</span><br>
“ggplot2”<span class="citation">[2]</span><br>
“gnm”<span class="citation">[3]</span><br>
“prefmod”<span class="citation">[4]</span><br>
“reshape2”<span class="citation">[5]</span><br>
“rlang”<span class="citation">[6]</span><br>
“stringr”<span class="citation">[7]</span><br>
“viridis”<span class="citation">[8]</span><br>
“ggrepel”<span class="citation">[9]</span><br>
“testthat”<span class="citation">[10]</span></p>
<p>The following function can be used to install single packages - or just the missing ones from CRAN.</p>
<pre class="{r"><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("paste missing package name here")
</a></code></pre>
</div>
<div id="simsalrbim" class="section level3">
<h3 class="hasAnchor">
<a href="#simsalrbim" class="anchor"></a>simsalRbim</h3>
<p>The development version of the simsalRbim package can be downloaded from GitHub with the following command.</p>
<pre class="{r"><code><a href="https://devtools.r-lib.org//reference/remote-reexports.html"># install.packages("devtools")
devtools::install_github("mytalbot/simsalRbim@main")
library(simsalRbim)</a></code></pre>
<p>A CRAN version may be available soon.</p>
</div>
</div>
<div id="general-concept-of-the-simsalrbim-package" class="section level2">
<h2 class="hasAnchor">
<a href="#general-concept-of-the-simsalrbim-package" class="anchor"></a>General concept of the simsalRbim package</h2>
<p>Data from a series of binary preference tests may be incomplete, may show ties or new item positions shall be tested without the need of testing ALL possible combinations. The simsalRbim package can address all three cases by using informed and uninformed simulations to find the optimal item positions in the data.</p>
<p>Preference test data usually come in two formats: quantities (i.e., a subject consumes 200 ml of orange juice but only 17 ml of milk) or binary data (i.e., “I like Star Trek better than Star Wars”). The <code>bimload</code> function in the package can load both formats, including the preferred side in a test as a variable. However, if a preference test is showing significant side dependencies (i.e., milk is preferred over orange juice if it is presented in a bottle positioned on the left side but vice versa if it is presented in the right bottle), the simulated outcome will be biased. With the current package it is not possible to resolve side-dependent tests.</p>
<p>In case of present ties, the binary response variable is randomized. By default, this happens at a 50% likelihood for an equal commodity selection. However, the user may specify other thresholds for considering a case as a tie, for example if a preference is only deemed to be meaningful if one item is chosen at &gt;65%.</p>
<p>Missing item tests and combinations are filled as ties and then simulated in the two simulation functions. In the uninformed simulation, data are continuously randomized and analyzed. With each additional simulation, the number of degrees of freedom decreases and the rank position of the items will become more confident, At a given number of degrees of freedom this will stabilize the 95% confidence intervals on the worth scale. Thus, item positions can be obtained with a reasonable confidence without having to include tests on all possible item combinations. If you assume that the data is following the supposition of transitivity (i.e., if A&gt;B and B&gt;C then A&gt;C) them the informed simulation can help to derive a ranking with higher confidence. In the informed simulation, the number of intransitive relationships within the simulated rank order is also calculated. The number of intransitive relationships in the results can be limited to any percentage between 0% and 100%. Thereby the item of interest can be placed on the worth scale at much higher confidence.</p>
</div>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<p>The package includes example data (ZickeZacke) that can be used to explore the packages functions and gives an example of how the input data must be formatted. Please note, that the item ‘HoiHoiHoi’ deliberately introduces variance in the data as it is incomplete, introduces a tie, and an intransitive relationship. Without this item it would be perfect data which do not need a simulation. In such cases, the package will show the worth plot but will also give a warning.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu">simsalRbim</span><span class="fu">::</span><span class="va"><a href="../reference/ZickeZacke.html">ZickeZacke</a></span><span class="op">)</span>
<span class="co">#&gt;   subjectID optionA optionB quantityA quantityB</span>
<span class="co">#&gt; 1      eins   Zicke   Zacke        50        40</span>
<span class="co">#&gt; 2      zwei   Zicke   Zacke        30        10</span>
<span class="co">#&gt; 3      drei   Zicke   Zacke        80         5</span>
<span class="co">#&gt; 4      vier   Zicke   Zacke        66        15</span>
<span class="co">#&gt; 5      eins Huehner   Kacke        30        20</span>
<span class="co">#&gt; 6      zwei Huehner   Kacke        50        40</span></code></pre></div>
<p>The input table must have the following columns:</p>
<p><strong>subjectID</strong> - a unique identifier for each subject in the preference test<br><strong>optionA</strong> - item A<br><strong>optionB</strong> - item B<br><strong>quantityA</strong> - quantitiy of item A (can also be binary 0 or 1)<br><strong>quantityB</strong> - quantitiy of item B (can also be binary 0 or 1)<br><strong>side</strong> - side of option A (this column is optional)</p>
</div>
<div id="functions" class="section level2">
<h2 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h2>
<div id="bim_load" class="section level3">
<h3 class="hasAnchor">
<a href="#bim_load" class="anchor"></a>bim_load</h3>
<pre><code><a href="../reference/bimload.html"># bimload - load function allows easy loading of data.
bimload(filename)</a></code></pre>
<p>The function takes a <code>filename</code> (*.txt) with quantitative or binary test data in the format shown the Data section above.</p>
</div>
<div id="bimpre" class="section level3">
<h3 class="hasAnchor">
<a href="#bimpre" class="anchor"></a>bimpre</h3>
<pre><code><a href="../reference/bimpre.html"># bimpre - will take care of the data preprocessing.
bimpre(dat=NULL, GT=NULL, simOpt=NULL, deviation=0, minQuantity=0,
verbose=TRUE)</a></code></pre>
<p>The function takes the data object (<code>dat</code>) from <code>bimload</code>, a parameter defining the ground truth (<code>GT</code>) as well as the item that requires simulation (<code>simOpt</code>). The <code>deviation</code> and <code>minQuantity</code> arguments can be used to modify the threshold of the tie selection (e.g, 50% + deviation, with deviation as the amount of additional deviation in percent (i.e, 50% + 5% deviation = 55%)).</p>
</div>
<div id="bimworth" class="section level3">
<h3 class="hasAnchor">
<a href="#bimworth" class="anchor"></a>bimworth</h3>
<pre><code><a href="../reference/bimworth.html"># bimworth is the central function of the package doing the worth calculations.
bimworth(ydata=NULL, GT=NULL, simOpt=NULL, randOP=FALSE, intrans=FALSE,
showPlot=FALSE, ylim=c(0,0.8), size = 5, verbose=FALSE)</a></code></pre>
<p>The <code>ydata</code> object takes the output from the preprocessing function (<code>bimpre</code>) as well as the ground truth (<code>GT</code>) and the simulated item (<code>simOpt</code>). With the <code>randOP</code> argument the randomization process can be controlled. If randOP=TRUE (present!) ties are randomized each time the function is executed. The <code>intrans</code> argument controls whether the intransitivity of the items shall be computed.</p>
</div>
<div id="bimeval" class="section level3">
<h3 class="hasAnchor">
<a href="#bimeval" class="anchor"></a>bimeval</h3>
<pre><code><a href="../reference/bimeval.html"># bimeval evaluates the consensus error in the worth calculations
bimeval(ydata=NULL, GT=NULL, simOpt=NULL, worth= NULL, coverage=0.8, 
showPlot=FALSE, filtersim=FALSE, title="Consensus Analysis", subtitle=NULL, 
verbose=FALSE, ylim=c(0,1))</a></code></pre>
<p>The first three input objects are the same as in <code>bimworth</code>. Additionally, the function requires the output from <code>bimworth</code> for the evaluation. Be aware that the <code>bimworth</code> output can be a list when <code>intrans=TRUE</code>. The <code>coverage</code> object defines an arbitrary threshold for data coverage warnings. There can be two warnings: number of subjects and number of items warnings. The graphical output can be controlled with the <code>showPlot</code> object.</p>
</div>
<div id="bimuninformed" class="section level3">
<h3 class="hasAnchor">
<a href="#bimuninformed" class="anchor"></a>bimUninformed</h3>
<pre><code><a href="../reference/bimUninformed.html"># bimUninformed does an uninformed simulation of item positions to find a
# cutoff.
bimUninformed(ydata=NULL, GT=NULL, simOpt=NULL, limitToRun=5, seed=TRUE, 
showPlot=TRUE, ylim=c(-0.5,1.5) )</a></code></pre>
<p>The function has the same first three input parameters as <code>bimworth</code>. In addition, the <code>limitToRun</code> object controls the number of randomizations in the worth calculations. The seeding can be set constant (<code>seed</code>). The output indicates an optimal cutoff for the number of required randomizations, e.g., for the separation of items, and, therefore, potential item positioning.</p>
<p>The function also plots the results with 95% confidence intervals of the adjusted p-values, derived from a post-hoc ANOVA with multiple comparisons (Tukey) test. There will be perfect item separation when the plotted value reaches zero. Any remaining variance indicates potential overlaps in the 95% confidence intervals. A less stringent (but less confident) threshold can be obtained when the upper level of the 95% confidence intervals falls below (0.05, see green points in the plot). This may be useful when calculation times are long. There will be a warning, if the function did not converge to a threshold.</p>
</div>
<div id="bimpos" class="section level3">
<h3 class="hasAnchor">
<a href="#bimpos" class="anchor"></a>bimpos</h3>
<pre><code><a href="../reference/bimpos.html"># bimpos - calculates item positions at a discrete number of randomizations.
bimpos(ydata=NULL, GT=NULL, simOpt=NULL, limitToRun=5, showPlot=TRUE)</a></code></pre>
<p>This function is very similar to <code>bimUninformed</code> and uses the same input arguments. However, it will not explore randomization space but will rather use a distinct cutoff to show the items’ relative position. The query item (<code>simOpt</code>) is shown in “red” in the plot. All items will be shown on the worth scale, together with 95% confidence intervals. Any overlap will indicate potential ambiguity in item positioning.</p>
</div>
<div id="bimsim" class="section level3">
<h3 class="hasAnchor">
<a href="#bimsim" class="anchor"></a>bimsim</h3>
<pre><code><a href="../reference/bimsim.html"># bimsim - informed position simulation
bimsim(rawdat=NULL, GT=GT, simOpt=simOpt, filter.crit="CE", limitToRun=5,
tcut=0.9, deviation=0, minQuantity=0, seed=TRUE, showPlot=TRUE,ylim=c(0,0.7))</a></code></pre>
<p>The <code>bimsim</code> function performs an informed position simulation of variable preference test data. The <code>limitToRun</code> argument from the <code>bimUninformed</code> output can be used as an estimate for the required number of randomizations. The <code>tcut</code> argument sets the cutoff for showing the consensus error (%, CE) of the simulated results in the plot <strong>OR</strong> the transitivity ratios (1-Iratio). The selection depends on the <code>filter.crit</code> parameter (“CE” or “Iratio”), i.e., tcut=0.95 results in a 95% cutoff. The more stringent (= higher tcut in case of transitivity ratios) the criterion, the more informed the simulation becomes. The output is a frequency distribution of <code>simOpts</code> preferred position at the given <code>tcut</code>. The plot shows the worth value of the <code>simOpt</code> item as a function of its position. The bubblesizes code for the consensus error/ transitivity ratio.</p>
</div>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-dplyrcite">
<p>1. Wickham H, François R, Henry L, Müller K: <em>Dplyr: A grammar of data manipulation</em>. 2020.</p>
</div>
<div id="ref-ggplot2cite">
<p>2. Wickham H: <em>Ggplot2: Elegant graphics for data analysis</em>. Springer-Verlag New York; 2016.</p>
</div>
<div id="ref-gnmcite">
<p>3. Turner H, Firth D: <em>Generalized nonlinear models in r: An overview of the gnm package</em>. 2020.</p>
</div>
<div id="ref-prefmodcit">
<p>4. Hatzinger R, Dittrich R: <strong>prefmod: An R Package for Modeling Preferences Based on Paired Comparisons, Rankings, or Ratings</strong>. <span class="csl-baseline"><em>Journal of Statistical Software</em></span> 2012, <strong>48</strong>:1–31.</p>
</div>
<div id="ref-reshape2cite">
<p>5. Wickham H: <strong>Reshaping data with the reshape package</strong>. <span class="csl-baseline"><em>Journal of Statistical Software</em></span> 2007, <strong>21</strong>:1–20.</p>
</div>
<div id="ref-rlangcite">
<p>6. Henry L, Wickham H: <em>Rlang: Functions for base types and core r and ’tidyverse’ features</em>. 2020.</p>
</div>
<div id="ref-stringrcite">
<p>7. Wickham H: <em>Stringr: Simple, consistent wrappers for common string operations</em>. 2019.</p>
</div>
<div id="ref-viridiscite">
<p>8. Garnier S: <em>Viridis: Default color maps from ’matplotlib’</em>. 2018.</p>
</div>
<div id="ref-ggrepelcite">
<p>9. Slowikowski K: <em>Ggrepel: Automatically position non-overlapping text labels with ’ggplot2’</em>. 2021.</p>
</div>
<div id="ref-testthatcite">
<p>10. Wickham H: <strong>Testthat: Get started with testing</strong>. <span class="csl-baseline"><em>The R Journal</em></span> 2011, <strong>3</strong>:5–10.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Steven Talbot, Dana Pfefferle, Ralf Brockhausen, Lars Lewejohann.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
