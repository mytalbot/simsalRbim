total <- rbind(ratio, mirror_ratio)
total
paste(combodat$optionB, combodat$optionA, sep="")
combodat$test
combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
combodat$test
uniqueCombo[i]
dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
dat
dat[dat$optionA %in% "NaCl", ]
total
total
dat[dat$optionA %in% "NaCl", ]
dat[dat$optionA %in% "water", ]
# balancing
combodat        <- dat
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
# test actual items
combodat$test   <- paste(combodat$optionA, combodat$optionB, sep="")
uniqueCombo     <- unique(combodat$actual)
ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
ratio       <- rbind(ratio, data.frame(comb0    = uniqueCombo[i],
type     = "actual",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
ratio
# test mirrored items
combodat$test   <- paste(combodat$optionB, combodat$optionA, sep="")
uniqueCombo     <- unique(combodat$actual)
mirror_ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
mirror_ratio<- rbind(mirror_ratio, data.frame(comb0    = uniqueCombo[i],
type     = "mirrored",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
mirror_ratio
# test mirrored items
combodat$test   <- paste(combodat$optionB, combodat$optionA, sep="")
uniqueCombo     <- unique(combodat$test)
mirror_ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
mirror_ratio<- rbind(mirror_ratio, data.frame(comb0    = uniqueCombo[i],
type     = "mirrored",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
mirror_ratio
# test mirrored items
combodat$test   <- paste(combodat$optionB, combodat$optionA, sep="")
uniqueCombo     <- unique(combodat$test)
mirror_ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
mirror_ratio<- rbind(mirror_ratio, data.frame(comb0    = uniqueCombo[i],
type     = "mirrored",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
mirror_ratio
combodat$test
paste(combodat$optionB, combodat$optionA, sep="")
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
combodat$test   <- paste(combodat$optionB, combodat$optionA, sep="")
uniqueCombo     <- unique(combodat$actual)
mirror_ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
mirror_ratio<- rbind(mirror_ratio, data.frame(comb0    = uniqueCombo[i],
type     = "mirrored",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
mirror_ratio
unique(combodat$actual)
combodat        <- dat
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
# test actual items
combodat$test   <- paste(combodat$optionA, combodat$optionB, sep="")
uniqueCombo     <- unique(combodat$actual)
ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
ratio       <- rbind(ratio, data.frame(comb0    = uniqueCombo[i],
type     = "actual",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
# test mirrored items
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
combodat$test   <- paste(combodat$optionB, combodat$optionA, sep="")
uniqueCombo     <- unique(combodat$actual)
mirror_ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
mirror_ratio<- rbind(mirror_ratio, data.frame(comb0    = uniqueCombo[i],
type     = "mirrored",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
total <- rbind(ratio, mirror_ratio)
total
combodat[combodat$optionA=="HCl", ]
combodat[combodat$optionA=="HCl" & combodat$optionA=="NaCl", ]
combodat[combodat$optionA=="HCl" & combodat$optionB=="NaCl", ]
# balancing
combodat        <- dat
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
# test actual items
combodat$test   <- paste(combodat$optionA, combodat$optionB, sep="")
uniqueCombo     <- unique(combodat$actual)
ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
ratio       <- rbind(ratio, data.frame(comb0    = uniqueCombo[i],
type     = "actual",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
# test mirrored items
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
combodat$test   <- paste(combodat$optionB, combodat$optionA, sep="")
uniqueCombo     <- unique(combodat$actual)
mirror_ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
mirror_ratio<- rbind(mirror_ratio, data.frame(comb0    = uniqueCombo[i],
type     = "mirrored",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
total <- rbind(ratio, mirror_ratio)
total
dat        <- bimload("C:/MHH Bleich/Aktuelles/PrePrefPackage 2020/data/human_LagreValenceRange_SpringSchool.txt")
# balancing
combodat        <- dat
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
# test actual items
combodat$test   <- paste(combodat$optionA, combodat$optionB, sep="")
uniqueCombo     <- unique(combodat$actual)
ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
ratio       <- rbind(ratio, data.frame(comb0    = uniqueCombo[i],
type     = "actual",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
# test mirrored items
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
combodat$test   <- paste(combodat$optionB, combodat$optionA, sep="")
uniqueCombo     <- unique(combodat$actual)
mirror_ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
mirror_ratio<- rbind(mirror_ratio, data.frame(comb0    = uniqueCombo[i],
type     = "mirrored",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
total <- rbind(ratio, mirror_ratio)
total
unique(combodat$test )
# balancing
combodat        <- dat
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
# test actual items
combodat$test   <- paste(combodat$optionA, combodat$optionB, sep="")
uniqueCombo     <- unique(combodat$actual)
ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
ratio       <- rbind(ratio, data.frame(comb0    = uniqueCombo[i],
type     = "actual",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
# test mirrored items
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
combodat$test   <- paste(combodat$optionB, combodat$optionA, sep="")
uniqueCombo     <- unique(combodat$actual)
mirror_ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
mirror_ratio<- rbind(mirror_ratio, data.frame(comb0    = unique(combodat$test )[i],
type     = "mirrored",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
total <- rbind(ratio, mirror_ratio)
total
bimbalance <- function(dat=NULL, sidevar="sideA"){
if(sum(names(dat) == sidevar) == 1){
# balancing
combodat        <- dat
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
# test actual items
combodat$test   <- paste(combodat$optionA, combodat$optionB, sep="")
uniqueCombo     <- unique(combodat$actual)
ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
ratio       <- rbind(ratio, data.frame(comb0    = uniqueCombo[i],
type     = "actual",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
# test mirrored items
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
combodat$test   <- paste(combodat$optionB, combodat$optionA, sep="")
uniqueCombo     <- unique(combodat$actual)
mirror_ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
mirror_ratio<- rbind(mirror_ratio, data.frame(comb0    = unique(combodat$test )[i],
type     = "mirrored",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
balance <- rbind(balance, mirror_ratio)
return(balance)
}else{
warning("You have no column with side information (left/right) in your data OR
you might have given it another name (see sidevar='sideA')")
}
}
dat        <- bimload("C:/MHH Bleich/Aktuelles/PrePrefPackage 2020/data/human_LagreValenceRange_SpringSchool.txt")
bimbalance(dat)
bimbalance <- function(dat=NULL, sidevar="sideA"){
if(sum(names(dat) == sidevar) == 1){
# balancing
combodat        <- dat
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
# test actual items
combodat$test   <- paste(combodat$optionA, combodat$optionB, sep="")
uniqueCombo     <- unique(combodat$actual)
ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
ratio       <- rbind(ratio, data.frame(comb0    = uniqueCombo[i],
type     = "actual",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
# test mirrored items
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
combodat$test   <- paste(combodat$optionB, combodat$optionA, sep="")
uniqueCombo     <- unique(combodat$actual)
mirror_ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
mirror_ratio<- rbind(mirror_ratio, data.frame(comb0    = unique(combodat$test )[i],
type     = "mirrored",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
balance <- NULL
balance <- rbind(balance, mirror_ratio)
return(balance)
}else{
warning("You have no column with side information (left/right) in your data OR
you might have given it another name (see sidevar='sideA')")
}
}
dat        <- bimload("C:/MHH Bleich/Aktuelles/PrePrefPackage 2020/data/human_LagreValenceRange_SpringSchool.txt")
bimbalance(dat)
bimbalance <- function(dat=NULL, sidevar="sideA"){
if(sum(names(dat) == sidevar) == 1){
# balancing
combodat        <- dat
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
# test actual items
combodat$test   <- paste(combodat$optionA, combodat$optionB, sep="")
uniqueCombo     <- unique(combodat$actual)
balance <- NULL
ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
ratio       <- rbind(ratio, data.frame(comb0    = uniqueCombo[i],
type     = "actual",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
# test mirrored items
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
combodat$test   <- paste(combodat$optionB, combodat$optionA, sep="")
uniqueCombo     <- unique(combodat$actual)
mirror_ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
mirror_ratio<- rbind(mirror_ratio, data.frame(comb0    = unique(combodat$test )[i],
type     = "mirrored",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
balance <- rbind(balance, mirror_ratio)
return(balance)
}else{
warning("You have no column with side information (left/right) in your data OR
you might have given it another name (see sidevar='sideA')")
}
}
dat        <- bimload("C:/MHH Bleich/Aktuelles/PrePrefPackage 2020/data/human_LagreValenceRange_SpringSchool.txt")
bimbalance(dat)
bimbalance <- function(dat=NULL, sidevar="sideA"){
if(sum(names(dat) == sidevar) == 1){
# balancing
combodat        <- dat
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
# test actual items
combodat$test   <- paste(combodat$optionA, combodat$optionB, sep="")
uniqueCombo     <- unique(combodat$actual)
balance <- NULL
ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
ratio       <- rbind(ratio, data.frame(comb0    = uniqueCombo[i],
type     = "actual",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
# test mirrored items
combodat$actual <- paste(combodat$optionA, combodat$optionB, sep="")
combodat$test   <- paste(combodat$optionB, combodat$optionA, sep="")
uniqueCombo     <- unique(combodat$actual)
mirror_ratio <- NULL
for(i in 1:length(uniqueCombo)){
counts_R    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ])[1]
counts_L    <- dim( combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ])[1]
pairdat_R   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "left", ]
pairdat_L   <- combodat[combodat$test %in% uniqueCombo[i] & combodat$sideA %in% "right", ]
mirror_ratio<- rbind(mirror_ratio, data.frame(comb0    = unique(combodat$test )[i],
type     = "mirrored",
counts_R = counts_R,
counts_L = counts_L,
RL_ratio = round(dim(pairdat_R)[1] / dim(pairdat_L)[1],3)))
}
balance <- rbind(ratio, mirror_ratio)
return(balance)
}else{
warning("You have no column with side information (left/right) in your data OR
you might have given it another name (see sidevar='sideA')")
}
}
dat        <- bimload("C:/MHH Bleich/Aktuelles/PrePrefPackage 2020/data/human_LagreValenceRange_SpringSchool.txt")
bimbalance(dat)
# Maus - Mice_oneLineTest1_20201102DP -------------------------------------
dat        <- bimload ("C:/MHH Bleich/Aktuelles/PrePrefPackage 2020/data/Mice_oneLineTest1_20201102DP.txt")
bimbalance(dat)
dat[dat$optionA=="Fire", ]
dat[dat$optionA %in% "Cat", ]
dat
# Human Large Valence (Spring School) -------------------------------------
dat        <- bimload("C:/MHH Bleich/Aktuelles/PrePrefPackage 2020/data/human_LagreValenceRange_SpringSchool.txt")
bimbalance(dat)
dat[dat$optionA %in% "Cat", ]
dat[dat$optionA %in% "Fire", ]
library(simsalRbim)
library(ggplot2)
# Bubblesize umdrehen in certainty
#  Perfect use case with no randomized items ------------------------------
dat        <- bimload("C:/MHH Bleich/Aktuelles/PrePrefPackage 2020/data/ZickeZackelinear.txt")
simOpt     <- "Zacke"
GT         <- c("Zicke", "Kacke", "Huehner")
predat     <- bimpre (dat=dat, GT=GT, simOpt=simOpt )
worth      <- bimworth(ydata    = predat,
GT       = GT,
simOpt   = simOpt,
intrans  = TRUE,
verbose  = TRUE,
showPlot = "worth") # or "coef"
worth
w_errors   <- bimeval(ydata     = predat,
worth     = worth$worth,
GT        = GT,
simOpt    = simOpt,
showPlot  = TRUE,
ylim      = c(0,1))
# remember: we want mean_delta to be high (close to 50%)
w_errors
bimristics <- function(predat=NULL, simOpt=NULL){
# How many Subjects are simulated?
BB <- predat[grepl(simOpt, predat$test, fixed = TRUE),  ]
subSimratio <- c()
for(i in 1:length(unique(BB$subjectID))){
sub            <- BB[BB$subjectID %in%  unique(BB$subjectID)[i],  ]
sub_sim        <- sum(sub$sim)
sub_full       <- sum(sub$sim==FALSE)
subSimratio[i] <- sub_sim/(sub_full + sub_sim)
}
stats <- data.frame(simOptItem      = simOpt,
subjects        = length(unique(predat$subjectID)),
subjectCoverage = 1-mean(subSimratio),
naturalTies     = sum(predat$tie==TRUE & predat$sim ==FALSE),
NoOfSims        = sum(predat$tie==TRUE & predat$sim ==TRUE),
pref_A          = sum(predat$result ==  1),
pref_B          = sum(predat$result == -1),
totalTests      = dim(predat)[1] )
return(stats)
}
bimristics(predat=predat, simOpt="Zicke")
library(simsalRbim)
bimdiag   <- function(dat=NULL, simOpt=NULL, GT=NULL, label=NULL){
printf  <- function(...) cat(sprintf(...))
predat  <- bimpre (dat=dat, GT=GT, simOpt=simOpt, deviation=0, minQuantity=0)
testsubjects  <- length(unique(dat[ (dat$optionA==simOpt | dat$optionB==simOpt), "subjectID"]))
totalSubjects <- length(unique(predat$subjectID))
dia     <- data.frame(simOpt                = simOpt,
subjects              = totalSubjects,
simOptSubjectCoverage = paste(testsubjects/totalSubjects*100, "% (",testsubjects," of ",totalSubjects,")",sep=""),
natural_ties          = sum(predat$result==   0),
res_A                 = sum(predat$result==   1),
res_B                 = sum(predat$result==  -1),
total_tests           = dim(predat)[1],
filled                = sum(predat$sim),
Iratio                = round(bimintrans(predat)$Iratio,4))
if(is.null(label)){
dia   <- dia
} else{
dia   <- cbind(study=label, dia)
}
return(dia)
}
dat       <- bimload ("C:/MHH Bleich/Aktuelles/PrePrefPackage 2020/data/Mice_oneLineTest2_20201102DP.txt")
mouse_hi  <- bimdiag(dat=dat, simOpt="AppleJuice", GT=c("AlmondMilk","water","HCl","quinine"), label="Mouse high valence")
mouse_hi
